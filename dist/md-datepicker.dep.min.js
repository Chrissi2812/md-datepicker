function a(e){return new Date(e.k().year,e.k().month+1,0).k().day}function s(e){return new Date(e.k().year,e.k().month,1).k().weekday}function t(){try{(new Date).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}var e=0;locale={en:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],weekday:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g:{h:"delete",i:"cancel"}},de:{month:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],weekday:["So","Mo","Di","Mi","Do","Fr","Sa"],g:{h:"Löschen",i:"Abrrechen"}}},prefixes=["moz","ms","webkit","o"],function($,i,n,o){function r(){var t=n.createElement("div").style;if(t.flex!=o)return!0;for(var e=prefixes.length-1;e>=0;e--)if(t[prefixes[e]+"Flex"]!=o)return!0;return!1}$.fn.md_datepicker=function(j){"use strict";function E(e,t,a,n,s){return'<div class="lolliclock-tick" style="left:'+(e+Math.sin(t)*(m*s)-a).toFixed(2)+"px;top:"+(e-Math.cos(t)*(m*s)-a).toFixed(2)+'px">'+n+"</div>"}function _(){return d.start&&d.end?d.o!=o&&d["start"==d.set?"end":"start"].o!=o:!1}function G(){ue(this.className.split(" ")[0].split("-")[1])}moment();if(!r())return $(this).each(function(t,e){try{e.type="date"}catch(t){e.type="text"}});e++;var Q=!1;if(this.each(function(){this.j&&(Q=!0)}),!Q){var me={language:null,theme:"light",timepicker:!1,startday:1,autoclose:!1,mindate:null,maxdate:null,range:"past",_24h:!1,format:"YYYY-MM-DD",animated:!0,submit:"string",custom_class:""},ce=t(),H="ontouchstart"in i,le="mousedown"+(H?" touchstart":""),F="mousemove.lolliclock"+(H?" touchmove.lolliclock":""),L="mouseup.lolliclock"+(H?" touchend.lolliclock":""),h="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",v=new Date,l=$.extend({},me,j),Y=[0,1,2,3,4,5,6],P=Y.splice(-l.startday),Y=P.concat(Y);if(l.language=l.language?l.language:navigator.language||navigator.userLanguage||"en",l.format=l.timepicker&&!j.format?"YYYY-MM-DD HH:mm":l.format,v.setSeconds(0),l.format){var B=l.format.match(/\W/),ie=l.timepicker?l.format.split(" ")[0].split(B).reverse():l.format.split(B).reverse();l.timepicker&&$.each(l.format.split(" ")[1].split(":"),function(t,e){ie.push(e)})}if(ce){for(var y,c=0,T=[];7>c;c++)y=new Date(2015,1,c),T[y.k().weekday]=y.toLocaleString(l.language,{weekday:"short"}).replace(".","");for(var y,c=0,N=[];12>c;c++)y=new Date(2015,c,1),N[c]=y.toLocaleString(l.language,{month:"long"})}else var T=locale[l.language.split("-")[0]].weekday.slice(0),N=locale[l.language.split("-")[0]].month.slice(0);P=T.splice(0,l.startday);var oe=T.concat(P),D="",M="",U="";$.each(oe,function(t,e){M+="<span>"+e+"</span>"}),$.each(N,function(e,t){U+='<span data-month="'+e+'">'+N[e]+"</span>"});var g=100,z=l.mindate&&l.mindate.search(/^[-+]/)?moment(l.mindate):moment().add(l.mindate,"y"),S=l.maxdate&&l.maxdate.search(/^[-+]/)?moment(l.maxdate):moment().add(l.maxdate,"y");l.mindate&&l.maxdate?(g=moment.duration(S-z).years(),l.range="calculated"):l.mindate&&"past"==l.range?g=moment.duration(v-z).years()+1:l.maxdate&&"future"==l.range&&(g=moment.duration(S-v).years());for(var y,c=0,ee="",A=l.range,I=v.k().year;g>=c;c++)ee+="<span>"+("future"==A?I+g-c:"past"==A?I-c:"calculated"==A?S.year()-c:I-(c-(g-g%2)/2))+"</span>";var ne=$(this);ne.each(function(){var e=this.cloneNode(!0);e.type="hidden",e.className="",e.l=this,e.id=this.id+"-timestamp",this.readOnly=!0,"timestamp"==l.submit?this.name="":e.name="",this.m=e,this.parentNode.appendChild(e),this.onchange=function(e){""!=this.value?(this.m.value=moment(this.value,l.format).unix(),this.o=new Date(moment(this.value,l.format).unix())):(this.m.value=0,this.m.o=o)},this.m.onchange=function(s){var t=Number(1e3*this.value),a=e.l.onchange;e.l.onchange=null,""==this.value?(e.l.value="",e.l.o=o):(e.l.value=moment(t).format(l.format),e.l.o=new Date(t)),$(e.l).change(),e.l.onchange=a}});for(var c=1;31>=c;c++)D+="<span>"+c+"</span>";if(l.timepicker){for(var c=n.styleSheets.length-1;c>=0;c--)if(n.styleSheets[c].href&&n.styleSheets[c].href.indexOf("md-datepicker")>0)for(var J=n.styleSheets[c].cssRules,c=J.length-1;c>=0;c--)if(".md-clock"==J[c].selectorText)var V=parseInt(J[c].style.height);for(var k,p=V/2,m=p-32,f=20,se=l._24h?25:13,c=1,R="";se>c;c++)k=c/6*Math.PI,R+=l._24h&&13>c?E(p,k,f,c,.6):E(p,k,f,c,1);for(var k,c=0,W="";60>c;c+=5)k=c/30*Math.PI,W+=E(p,k,f,c.pad(2),1);var ae='<div class="md-datepicker-timeview"><div class="md-datepick-header"><div class="md-datepicker-headline"><span class="md-hour"></span>:<span class="md-minute"></span><div class="md-ampm-toggle"><span class="md-am">AM</span><span class="md-pm">PM</span></div></div><i class="md-toggle-state no-hover">&#xE878</i></div><div class="md-clock"><div class="md-hours">'+R+'</div><div class="md-minutes">'+W+"</div></div></div>",x='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="lolliclock-svg" width="'+V+'" height="'+V+'" style="transform: rotateZ(0deg);"><g transform="translate('+p+","+p+')"><circle class="lolliclock-canvas-bg" r="'+f+'" cx="0" cy="-'+m+'"></circle><circle class="lolliclock-canvas-fg" r="3.5" cx="0" cy="-'+m+'" ></circle><line x1="0" y1="0" x2="0" y2="-'+(m-f)+'"></line><circle class="lolliclock-bearing" cx="0" cy="0" r="3.5"></circle></g></svg>',re=function(e){var r=q.offset(),c=/^touch/.test(e.type),s=r.left+p,o=r.top+p,t=(c?e.originalEvent.touches[0]:e).pageX-s,a=(c?e.originalEvent.touches[0]:e).pageY-o,h=Math.sqrt(t*t+a*a),i=!1;m-f>h||h>m+f||(e.preventDefault(),$(n.body).addClass("lolliclock-moving"),q.append(self.canvas),w(t,a),$(n).off(F).on(F,function(e){e.preventDefault(),d.q.p.classList.remove("animate");var n=/^touch/.test(e.type),r=(n?e.originalEvent.touches[0]:e).pageX-s,l=(n?e.originalEvent.touches[0]:e).pageY-o;(i||r!==t||l!==a)&&(i=!0,w(r,l))}),$(n).off(L).on(L,function(e){e.preventDefault();var r=/^touch/.test(e.type),c=(r?e.originalEvent.changedTouches[0]:e).pageX-s,m=(r?e.originalEvent.changedTouches[0]:e).pageY-o;c===t&&m===a&&w(c,m),"hours"===d.currentView?setTimeout(function(){X(!0)},i?0:250):l.autoclose,$(n.body).removeClass("lolliclock-moving"),$(n).off(F),$(n).off(L)}))}}var te='<div class="md-datepicker md-'+l.theme.split(" ").join(" md-")+("all"==l.animated||"inout"==l.animated||l.animated?" md-datepicker-animated":"")+(""!=l.custom_class?" "+l.custom_class:"")+'" id="md-datepicker-'+e.pad(3)+'"><div class="md-datepicker-views"><div class="md-datepicker-dateview"><div class="md-datepick-header"><div><span class="year"></span></div><div class="md-datepicker-headline"><span class="weekday"></span><span class="day"></span> <span class="month"></span></div>'+(l.timepicker?'<i class="md-toggle-state no-hover">&#xE192;</i>':"")+'</div><div class="md-datepick-month"><i class="md-previous md-touchtarget no-hover">&#xE408;</i><i class="md-next md-touchtarget no-hover">&#xE409;</i></div><div class="md-months"><div class="md-previous-month md-month"><div class="md-date-wrap"><span class="md-month-display"></span> <span class="md-year-display"></span></div><div class="md-weekday">'+M+'</div><div class="md-week">'+D+'</div></div><div class="md-current-month md-month"><div class="md-date-wrap"><span class="md-month-display"></span> <span class="md-year-display"></span></div><div class="md-weekday">'+M+'</div><div class="md-week">'+D+'</div></div><div class="md-next-month md-month"><div class="md-date-wrap"><span class="md-month-display"></span> <span class="md-year-display"></span></div><div class="md-weekday">'+M+'</div><div class="md-week">'+D+'</div></div></div><div class="month-select md-select-wrap">'+U+'</div><div class="year-select md-select-wrap">'+ee+"</div></div>"+(l.timepicker?ae:"")+'</div><div class="md-buttons"><div class="md-button-flat button-delete">'+locale[l.language.split("-")[0]].g.h+'</div><div class="md-button-flat button-cancel">'+locale[l.language.split("-")[0]].g.i+'</div><div class="md-button-flat button-ok">OK</div></div></div>',w=function(i,r){var e,a=Math.atan2(-i,r)+Math.PI,n="hours"===d.currentView,o=Math.PI/(n?6:30);if(e=Math.round(a/o),a=e*o,n)0===e&&(e=12),d.s.style.visibility="hidden",d.q.t.text(d.hasClass("pm")?e+12==24?12:(e+12).pad(2):12==e?"00":e.pad(2)),d.o.setHours(d.q.t.text());else{var l=e%5===0;l?d.s.style.visibility="hidden":d.s.style.visibility="visible",60===e&&(e=0),d.q.u.text(e.pad(2)),d.o.setMinutes(d.q.u.text())}var c="hours"==d.currentView?d.v.hours:d.v.minutes;c.each(function(a,t){$(t).toggleClass("active",$(t).text()==e)});var s,t=a*(180/Math.PI)%360;s=Math.abs(d.q.p.A-t)>180?360+t:t,d.q.p.A=Math.abs(d.q.p.A-t)>180?d.q.p.A+360:d.q.p.A,$(d.q.p).css("transform","rotateZ("+s+"deg)"),d.q.p.B=s},Z=function(s){var e=$(s).offset(),t=d.width(),a=d.height();return e.top=e.top+a+8>=$(i).height()?$(i).height()-a-8:e.top,e.left=e.left+t+8>=$(i).width()?$(i).width()-t-8:e.left,e};this.show=function(e){d.set=d.start==e?"start":"end";var s=""!=e.value?l.format?moment(e.value,l.format):moment(e.value):moment(_()?"start"==d.set?d.end.o:d.start.o:""),t=Z(e);d.o=new Date(s),d.o=isNaN(d.o.getTime())?new Date:d.o,d.range=_(),d.removeClass("hidden"),d.q.C.removeClass("disabled"),u("current"),u("previous"),u("next"),b(),l.animated?(d.on(h,function(){d.addClass("animate"),d.off(h)}),d.hasClass("clockpicker")?(d.removeClass("clockpicker"),d.on(h,".md-datepicker-views",function(e){e.preventDefault(),$(d).css({top:t.top,left:t.left}).off(h)})):$(d).css({top:t.top,left:t.left}).addClass("md-datepicker-visible")):$(d).css({top:t.top,left:t.left}).addClass("md-datepicker-visible"),d.q.buttons.off(),d.q.buttons.on("click",".button-ok",function(t){t.preventDefault(),$(e).is("[type=date]")?$(e).val(d.o.k().year+"-"+(d.o.k().month+1).pad(2)+"-"+d.o.k().day.pad(2)).change():l.format?$(e).val(moment(d.o).format(l.format)).change():l.timepicker?$(e).val(d.o.toLocaleString()).change():$(e).val(d.o.toLocaleDateString()).change(),d[d.set].o=d.o,e.o=d.o,O(e)}),d.q.buttons.on("click",".button-delete",function(t){t.preventDefault(),e.o=o,$(e).val("").change(),O(e)}),d.q.buttons.children(".button-delete").toggleClass("disabled",""==e.value),d.q.buttons.on("click",".button-cancel",function(t){t.preventDefault(),O(e)});var a;$(i).on("resize.id"+d.D,function(s){clearTimeout(a),t=Z(e),d.css({top:t.top,left:t.left}).removeClass("animate"),a=setTimeout(function(){d.addClass("animate")},100)})};var O=function(e){$(e).removeClass("focused"),d.removeClass("clockpicker md-datepicker-visible animate"),d.q.buttons.off(),$(i).off("resize.id"+d.D),d.on(h,function(e){e.preventDefault(),d.addClass("hidden"),d.off(h)})},b=function(){if(_()){var e="start"==d.set?"end":"start",t=d.q.select_year.find("span:matches("+d[e].o.k().year+")");(d.start.o&&d.start.o.k().year<=d.o.k().year&&"start"==e||d.end.o&&d.end.o.k().year>=d.o.k().year&&"end"==e)&&($(d.q.C["start"==d.set|0]).toggleClass("disabled",d.o.k().year==d[e].o.k().year&&d[e].o.k().month==d.o.k().month),d.o.k().year==d[e].o.k().year&&t.push(d.q.select_month.find("span[data-month="+d[e].o.k().month+"]")[0]),d.find(".md-select-wrap>span").removeClass("disabled"),"end"==d.set?($(t[1]).prevAll().addClass("disabled"),$(t[0]).nextAll().addClass("disabled")):($(t[0]).prevAll().addClass("disabled"),$(t[1]).nextAll().addClass("disabled")))}else d.find(".md-select-wrap>span").removeClass("disabled");if(d.q.F.text(d.o.G(l.language,{month:"long"})),d.q.years.text(d.o.k().year),d.q.H.text(d.o.k().day),d.q.weekday.text(d.o.G(l.language,{weekday:"short"}).replace(".","")),l.timepicker){d.removeClass("minute"),d.currentView="hours",d.toggleClass("pm",d.o.k().hours>=12),d.q.t.text(d.o.k().hours.pad(2)),d.q.u.text(d.o.k().minutes.pad(2));var a=d.o.k().hours*(Math.PI/6),s=d.o.k().minutes*(Math.PI/30),n=Math.sin(a)*m,o=-Math.cos(a)*m;d.q.p.A=s*(180/Math.PI),d.q.p.B=a*(180/Math.PI),w(n,o)}},X=function(a){var e=!$(a.target).is(".md-hour");d.q.p.A=d.q.p.B,d.currentView=e?"minutes":"hours";var t=(e?d.q.u.text():d.q.t.text())*(Math.PI/("hours"===d.currentView?6:30)),s=Math.sin(t)*m,n=-Math.cos(t)*m;d.q.p.classList.add("animate"),d.toggleClass("minute",e),$(d.q.p).on(h,function(e){$(d.q.p).off(),d.q.p.classList.remove("animate")}),w(s,n)},K=function(e){var t="year"==e?d.q.select_year.find("span:matches("+d.o.k().year+")"):d.q.select_month.find("span[data-month="+d.o.k().month+"]");if(!t.length){for(var n=d.o.k().year-Number(d.q.select_year.children(":first-child").text()),a=1,o=Number(d.q.select_year.children(":first-child").text());n>=a;a++)d.q.select_year.prepend("<span>"+(o+a)+"</span>");t=d.q.select_year.find("span:matches("+d.o.k().year+")")}var s=t.position().top;d.q["select_"+e].children("span").removeClass("md-currentdate"),"year"==e?d.q.select_year.find("span:matches("+d.o.k().year+")").addClass("md-currentdate"):d.q.select_month.find("span[data-month="+d.o.k().month+"]").addClass("md-currentdate"),d.q["select_"+e].addClass("inview animate"),d.q["select_"+e].stop().animate({scrollTop:s+d.q["select_"+e][0].scrollTop-(d.q["select_"+e][0].clientHeight-48)/2},parseInt(Math.abs(s.I(0,2e3,500,3e3))),"easeInOutExpo"),d.q["select_"+e].on(h,function(){d.q["select_"+e].removeClass("animate")}),d.q["select_"+e].on("mousewheel",function(t){d.q["select_"+e].stop()})},ue=function(e){var t=d.range?"next"==e?"start"==d.set&&d.o.k().month<d.end.o.k().month||"start"==d.set&&d.o.k().year!=d.end.o.k().year||"end"==d.set:"end"==d.set&&d.o.k().month>d.start.o.k().month||"end"==d.set&&d.o.k().year!=d.start.o.k().year||"start"==d.set:!0,a="start"==d.set?"end":"start";t&&(d.q.C.off("click"),d.q.J.addClass("animate "+e),"next"==e?d.o.setMonth(d.o.k().month+1):d.o.setMonth(d.o.k().month-1),(d.range&&"start"==d.set&&d.end.o<=d.o||d.range&&"end"==d.set&&d.start.o>=d.o)&&(d.o=new Date(d[a].o),de()),b(),d.q.J.on(h,function(){d.q.current.html(d.q[e].html()),d.q.J.removeClass("animate "+e),u("next"),u("previous"),d.q.J.off(h),d.q.C.on("click",G)}))},de=function(){for(var t=["next","previous"],e=t.length-1;e>=0;e--)d.q[t[e]].find(".md-selecteddate").removeClass("md-selecteddate"),d.q[t[e]].find("span:matches("+d.o.k().day+")").addClass("md-selecteddate")},u=function(o){var r,n,c=d.o.k().month,e=new Date(d.o),i="";"previous"==o?e.setMonth(c-1):"next"==o&&e.setMonth(c+1),r=Y[s(e)];for(var u=a(e),t=l.startday;t<r+l.startday;t++)i+="<span></span>";var p=v.k().month==e.k().month&&v.k().year==e.k().year,m="start"==d.set?"end":"start";if(d.range)var h=e.k().month==d[m].o.k().month&&e.k().year==d[m].o.k().year;for(var t=1;u>=t;t++)n=[],d.o.k().day==t&&n.push("md-selecteddate"),v.k().day==t&&p&&n.push("md-currentdate"),(d.range&&"start"==d.set&&t>d.end.o.k().day&&h||d.range&&"end"==d.set&&t<d.start.o.k().day&&h)&&n.push("disabled"),i+="<span"+(n.length>=1?' class="'+n.join(" ")+'"':"")+" >"+t+"</span>";d.q[o].find(".md-month-display").text(e.G(l.language,{month:"long"})),d.q[o].find(".md-year-display").text(e.k().year),d.q[o].find(".md-week").html(i)},d=$(te).appendTo("body");if(d.q={},d.D=e,l.timepicker){var q=d.find(".md-clock");x=$(x).appendTo(q)[0],$.extend(d,{s:$(x).find(".lolliclock-canvas-fg")[0],canvas:q,v:{}}),d.q.p=x,d.q.p.B=0,d.v.minutes=d.canvas.find(".md-minutes>div"),d.v.hours=d.canvas.find(".md-hours>div"),d.q.t=d.find(".md-hour"),d.q.u=d.find(".md-minute"),d.q.K=d.find(".md-ampm-toggle"),d.currentView="hours",q.on(le,re)}d.q.years=d.find(".year"),d.q.F=d.find(".month"),d.q.H=d.find(".day"),d.q.buttons=d.find(".md-buttons"),d.q.weekday=d.find(".weekday"),d.q.J=d.find(".md-months"),d.q.current=d.find(".md-current-month"),d.q.next=d.find(".md-next-month"),d.q.C=d.find(".md-next").add(d.find(".md-previous")),d.q.select_month=d.find(".month-select"),d.q.select_year=d.find(".year-select"),d.q.previous=d.find(".md-previous-month"),d.q.C.on("click",G),d.on("click",".month-select>span, .year-select>span",function(t){if($(this).data("month")===o?(d.o.setYear($(this).text()),d.q.select_year.off()):(d.o.setMonth($(this).data("month")),d.q.select_month.off()),d.range&&("start"==d.set&&d.end.o<=d.o||"end"==d.set&&d.start.o>=d.o)){var e="start"==d.set?"end":"start";d.o=new Date(d[e].o)}b(),u("current"),$(this).parents(".md-select-wrap").addClass("animate").removeClass("inview").off(h),u("previous"),u("next")}),d.q.F.on("click",function(e){K("month")}),d.q.years.on("click",function(e){K("year")}),d.on("click",".md-week span",function(e){d.q.J.find(".md-selecteddate").removeClass("md-selecteddate"),d.q.J.find("span:matches("+$(this).text()+")").addClass("md-selecteddate"),d.o.setDate($(this).text()),b()}),d.on("click",".md-toggle-state",function(e){d.toggleClass("clockpicker",!d.hasClass("clockpicker"))}),d.on("click",".md-minute, .md-hour",function(e){X(e)}),d.on("click",".md-pm, .md-am",function(t){d.toggleClass("pm",!$(t.target).is(".md-am"));var e=parseInt(d.q.t.text());e=d.hasClass("pm")?e+12==24?12:e+12:0==e?0:e-12,d.q.t.text(e.pad(2)),d.o.setHours(e.pad(2))});var he=this,C=[];return this.each(function(){this.j=!0,$(this).on("focus",function(e){e.preventDefault(),$(C).removeClass("focused"),$(e.target).addClass("focused"),he.show(e.target)}),C.push(this),$(this).is("[data-md-start]")&&(d.start=this),$(this).is("[data-md-end]")&&(d.end=this)}).promise().done(function(){if(d.state="ready",C.length>2&&d.start)throw new Error("Only one start and one end Date is allowed");d.L=C})}}}(jQuery,window,document),Number.prototype.I=function(e,a,t,s){return t+(this-e)*(s-t)/(a-e)},Date.prototype.k=function(){return{year:this.getFullYear(),month:this.getMonth(),hours:this.getHours(),minutes:this.getMinutes(),day:this.getDate(),weekday:this.getDay()}},Date.prototype.G=function(a,e){return t()?this.toLocaleString(a,e):locale[a.split("-")[0]][Object.keys(e)[0]][this.k()[Object.keys(e)]]},Element.prototype.M=function(t){"use strict";for(var e in t)t.hasOwnProperty(e)&&(this instanceof SVGElement||(this[e]=t[e]),this[e]!=t[e]&&this.setAttribute(e,t[e]));return this},Number.prototype.pad=function(t){for(var e=String(this);e.length<(t||2);)e="0"+e;return e},String.prototype.pad=function(t){for(var e=String(this);e.length<(t||2);)e="0"+e;return e},$.expr[":"].matches=$.expr.createPseudo(function(e){return function(t){return $(t).text().match("^"+e+"$")}});
