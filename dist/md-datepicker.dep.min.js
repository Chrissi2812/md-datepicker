function n(t){return new Date(t.k().year,t.k().month+1,0).k().day}function i(t){return new Date(t.k().year,t.k().month,1).k().weekday}function e(){try{(new Date).toLocaleString("i")}catch(t){return"RangeError"===t.name}return!1}var a=0,t={en:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],weekday:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g:{h:"delete",i:"cancel"}},de:{month:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],weekday:["So","Mo","Di","Mi","Do","Fr","Sa"],g:{h:"Löschen",i:"Abrrechen"}}},s=["moz","ms","webkit","o"];!function($,o,r,d){function l(){var e=r.createElement("div").style;if(e.flex)return!0;for(var t=s.length-1;t>=0;t--)if(e[s[t]+"Flex"]!=d)return!0;return!1}$.fn.md_datepicker=function(vt){"use strict";function y(t){return r.createElementNS(ut,t)}function j(t,e,a,n,s){return'<div class="lolliclock-tick" style="left:'+(t+Math.sin(e)*(u*s)-a).toFixed(2)+"px;top:"+(t-Math.cos(e)*(u*s)-a).toFixed(2)+'px">'+n+"</div>"}function tt(){return s.start&&s.end?s.m!=d&&s["start"==s.set?"end":"start"].m!=d:!1}function Z(){ht(this.className.split(" ")[0].split("-")[1])}if(!l())return $(this).each(function(e,t){try{t.type="date"}catch(e){t.type="text"}});a++;var G=!1;if(this.each(function(){this.j&&(G=!0)}),!G){var nt={language:null,theme:"light",timepicker:!1,startday:1,autoclose:!1,mindate:null,maxdate:null,color:null,_24h:!1,format:null,animated:!0,submit:"string",custom_class:""},ot=e(),V="ontouchstart"in o,st="mousedown"+(V?" touchstart":""),B="mousemove.lolliclock"+(V?" touchmove.lolliclock":""),I="mouseup.lolliclock"+(V?" touchend.lolliclock":""),p="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",x=new Date,m=$.extend({},nt,vt),L=[0,1,2,3,4,5,6],J=L.splice(-m.startday),L=J.concat(L);if(m.language=m.language?m.language:navigator.language||navigator.userLanguage||"en",x.setSeconds(0),m.format){var kt=m.format.match(/\W/),at=m.format.split(" ")[0].split(kt).reverse();$.each(m.format.split(" ")[1].split(":"),function(e,t){at.push(t)})}if(ot){for(var q,c=0,H=[];7>c;c++)q=new Date(2015,1,c),H[q.k().weekday]=q.toLocaleString(m.language,{weekday:"short"}).replace(".","");for(var q,c=0,F=[];12>c;c++)q=new Date(2015,c,1),F[c]=q.toLocaleString(m.language,{month:"long"})}else var H=t[m.language.split("-")[0]].weekday.slice(0),F=t[m.language.split("-")[0]].month.slice(0);J=H.splice(0,m.startday);var ft=H.concat(J),D="",T="",z="";$.each(ft,function(e,t){T+="<span>"+t+"</span>"}),$.each(F,function(t,e){z+='<span data-month="'+t+'">'+F[t]+"</span>"});for(var q,c=1,W="",et=100,lt=x.k().year;et+2>c;c++)W+="<span>"+(lt-(c-(et+2)/2))+"</span>";var mt=$(this);mt.each(function(){var t=this.cloneNode(!0);t.type="hidden",t.className="",t.l=this,this.readOnly=!0,t.id=this.id+"-timestamp","timestamp"==m.submit?this.name="":t.name="",this.timestamp=t,this.parentNode.appendChild(t),this.onchange=function(t){""!=this.value?(this.timestamp.value=moment(this.value,m.format).unix(),this.m=new Date(moment(this.value,m.format).unix())):(this.timestamp.value=0,this.timestamp.m=d)},this.timestamp.onchange=function(s){var e=Number(1e3*this.value),a=t.l.onchange;t.l.onchange=null,""==this.value?(t.l.value="",t.l.m=d):(t.l.value=moment(e).format(m.format),t.l.m=new Date(e)),$(t.l).change(),t.l.onchange=a}});for(var c=1;31>=c;c++)D+="<span>"+c+"</span>";if(m.timepicker){for(var c=r.styleSheets.length-1;c>=0;c--)if(r.styleSheets[c].href&&r.styleSheets[c].href.indexOf("md-datepicker")>0)for(var P=r.styleSheets[c].cssRules,c=P.length-1;c>=0;c--)if(".md-clock"==P[c].selectorText)var yt=parseInt(P[c].style.height);for(var M,h=yt/2,u=h-32,f=20,K=2*h,dt=m._24h?25:13,c=1,R="";dt>c;c++)M=c/6*Math.PI,R+=m._24h&&13>c?j(h,M,f,c,.6):j(h,M,f,c,1);for(var M,c=0,Y="";60>c;c+=5)M=c/30*Math.PI,Y+=j(h,M,f,c.pad(2),1);var ct='<div class="md-datepicker-timeview"><div class="md-datepick-header"><div class="md-datepicker-headline"><span class="md-hour"></span>:<span class="md-minute"></span><div class="md-ampm-toggle"><span class="md-am">AM</span><span class="md-pm">PM</span></div></div><i class="md-toggle-state no-hover">&#xE878</i></div><div class="md-clock"><div class="md-hours">'+R+'</div><div class="md-minutes">'+Y+"</div></div></div>",ut="http://www.w3.org/2000/svg",b=y("svg");b.setAttribute("class","lolliclock-svg"),b.setAttribute("width",K),b.setAttribute("height",K);var k=y("g");k.setAttribute("transform","translate("+h+","+h+")");var g=y("circle");g.setAttribute("class","lolliclock-bearing"),g.setAttribute("cx",0),g.setAttribute("cy",0),g.setAttribute("r",5);var N=y("line");N.setAttribute("x1",0),N.setAttribute("y1",0);var E=y("circle");E.setAttribute("class","lolliclock-canvas-bg"),E.setAttribute("r",20);var S=y("circle");S.setAttribute("class","lolliclock-canvas-fg"),S.setAttribute("r",3.5),k.appendChild(N),k.appendChild(E),k.appendChild(S),k.appendChild(g),b.appendChild(k);var it=function(t){var o=w.offset(),d=/^touch/.test(t.type),n=o.left+h,i=o.top+h,e=(d?t.originalEvent.touches[0]:t).pageX-n,a=(d?t.originalEvent.touches[0]:t).pageY-i,l=Math.sqrt(e*e+a*a),c=!1;u-f>l||l>u+f||(t.preventDefault(),$(r.body).addClass("lolliclock-moving"),w.append(self.canvas),C(e,a),$(r).off(B).on(B,function(t){t.preventDefault();var s=/^touch/.test(t.type),r=(s?t.originalEvent.touches[0]:t).pageX-n,o=(s?t.originalEvent.touches[0]:t).pageY-i;(c||r!==e||o!==a)&&(c=!0,C(r,o))}),$(r).off(I).on(I,function(t){t.preventDefault();var o=/^touch/.test(t.type),d=(o?t.originalEvent.changedTouches[0]:t).pageX-n,l=(o?t.originalEvent.changedTouches[0]:t).pageY-i;d===e&&l===a&&C(d,l),"hours"===s.currentView?Q(!0):m.autoclose,$(r.body).removeClass("lolliclock-moving"),$(r).off(B),$(r).off(I)}))}}var rt='<div class="md-datepicker md-'+m.theme.split(" ").join(" md-")+("all"==m.animated||"inout"==m.animated||m.animated?" md-datepicker-animated":"")+(""!=m.custom_class?" "+m.custom_class:"")+'" id="md-datepicker-'+a.pad(3)+'"><div class="md-datepicker-views"><div class="md-datepicker-dateview"><div class="md-datepick-header"><div><span class="year"></span></div><div class="md-datepicker-headline"><span class="weekday"></span><span class="day"></span> <span class="month"></span></div>'+(m.timepicker?'<i class="md-toggle-state no-hover">&#xE192;</i>':"")+'</div><div class="md-datepick-month"><i class="md-previous md-touchtarget no-hover">&#xE408;</i><i class="md-next md-touchtarget no-hover">&#xE409;</i></div><div class="md-months"><div class="md-previous-month md-month"><div class="md-date-wrap"><span class="md-month-display"></span> <span class="md-year-display"></span></div><div class="md-weekday">'+T+'</div><div class="md-week">'+D+'</div></div><div class="md-current-month md-month"><div class="md-date-wrap"><span class="md-month-display"></span> <span class="md-year-display"></span></div><div class="md-weekday">'+T+'</div><div class="md-week">'+D+'</div></div><div class="md-next-month md-month"><div class="md-date-wrap"><span class="md-month-display"></span> <span class="md-year-display"></span></div><div class="md-weekday">'+T+'</div><div class="md-week">'+D+'</div></div></div><div class="month-select md-select-wrap">'+z+'</div><div class="year-select md-select-wrap">'+W+"</div></div>"+(m.timepicker?ct:"")+'</div><div class="md-buttons"><div class="md-button-flat button-delete">'+t[m.language.split("-")[0]].g.h+'</div><div class="md-button-flat button-cancel">'+t[m.language.split("-")[0]].g.i+'</div><div class="md-button-flat button-ok">OK</div></div></div>',C=function(o,d){var t,e=Math.atan2(-o,d)+Math.PI,a="hours"===s.currentView,n=Math.PI/(a?6:30);if(t=Math.round(e/n),e=t*n,a)0===t&&(t=12),s.o.style.visibility="hidden",s.q.p.text(s.hasClass("pm")?t+12==24?12:(t+12).pad(2):12==t?"00":t.pad(2)),s.m.setHours(s.q.p.text());else{var l=t%5===0;l?s.o.style.visibility="hidden":s.o.style.visibility="visible",60===t&&(t=0),s.q.s.text(t.pad(2)),s.m.setMinutes(s.q.s.text())}var m="hours"==s.currentView?s.t.hours:s.t.minutes;m.each(function(a,e){$(e).toggleClass("active",$(e).text()==t)}),s.u.insertBefore(s.v,s.A),s.u.insertBefore(s.B,s.o),s.B.setAttribute("class","lolliclock-canvas-bg");var i=Math.sin(e)*u,r=-Math.cos(e)*u;s.v.setAttribute("x2",Math.sin(e)*(u-f)),s.v.setAttribute("y2",-Math.cos(e)*(u-f)),s.B.setAttribute("cx",i),s.B.setAttribute("cy",r),s.o.setAttribute("cx",i),s.o.setAttribute("cy",r)},X=function(n){var t=$(n).offset(),e=s.width(),a=s.height();return t.top=t.top+a+8>=o.innerHeight?o.innerHeight-a-8:t.top,t.left=t.left+e+8>=o.innerWidth?o.innerWidth-e-8:t.left,t};this.show=function(t){s.set=s.start==t?"start":"end";var n=""!=t.value?m.format?moment(t.value,m.format):moment(t.value):moment("start"==s.set?s.end.m:s.start.m),e=X(t);s.m=new Date(n),s.m=isNaN(s.m.getTime())?new Date:s.m,s.range=tt(),s.q.C.removeClass("disabled"),v("current"),v("previous"),v("next"),_(),m.animated?(s.on(p,function(){s.addClass("animate"),s.off(p)}),s.hasClass("clockpicker")?(s.removeClass("clockpicker"),s.on(p,".md-datepicker-views",function(t){t.preventDefault(),$(s).css({top:e.top,left:e.left}).off(p)})):$(s).css({top:e.top,left:e.left}).addClass("md-datepicker-visible")):$(s).css({top:e.top,left:e.left}).addClass("md-datepicker-visible"),s.q.buttons.off(),s.q.buttons.on("click",".button-ok",function(e){e.preventDefault(),$(t).is("[type=date]")?$(t).val(s.m.k().year+"-"+(s.m.k().month+1).pad(2)+"-"+s.m.k().day.pad(2)).change():m.format?$(t).val(moment(s.m).format(m.format)).change():m.timepicker?$(t).val(s.m.toLocaleString()).change():$(t).val(s.m.toLocaleDateString()).change(),s[s.set].m=s.m,t.m=s.m,O(t)}),s.q.buttons.on("click",".button-delete",function(e){e.preventDefault(),t.m=d,$(t).val("").change(),O(t)}),s.q.buttons.children(".button-delete").toggleClass("disabled",""==t.value),s.q.buttons.on("click",".button-cancel",function(e){e.preventDefault(),O(t)});var a;$(o).on("resize",function(n){clearTimeout(a),e=X(t),s.css({top:e.top,left:e.left}).removeClass("animate"),a=setTimeout(function(){s.addClass("animate")},100)})};var O=function(t){$(t).removeClass("focused"),s.removeClass("clockpicker md-datepicker-visible animate"),s.q.buttons.off(),$(o).off("resize")},_=function(){if(tt()){var t="start"==s.set?"end":"start",e=$(".md-select-wrap>span:matches("+s[t].m.k().year+")");(s.start.m&&s.start.m.k().year<=s.m.k().year&&"start"==t||s.end.m&&s.end.m.k().year>=s.m.k().year&&"end"==t)&&($(s.q.C["start"==s.set|0]).toggleClass("disabled",s.m.k().year==s[t].m.k().year&&s[t].m.k().month==s.m.k().month),s.m.k().year==s[t].m.k().year&&e.push($(".md-select-wrap>span[data-month="+s[t].m.k().month+"]")[0]),s.find(".md-select-wrap>span").removeClass("disabled"),"end"==s.set?($(e[1]).prevAll().addClass("disabled"),$(e[0]).nextAll().addClass("disabled")):($(e[0]).prevAll().addClass("disabled"),$(e[1]).nextAll().addClass("disabled")))}else s.find(".md-select-wrap>span").removeClass("disabled");if(s.q.D.text(s.m.F(m.language,{month:"long"})),s.q.G.text(s.m.k().year),s.q.H.text(s.m.k().day),s.q.weekday.text(s.m.F(m.language,{weekday:"short"}).replace(".","")),m.timepicker){s.removeClass("minute"),s.currentView="hours",s.toggleClass("pm",s.m.k().hours>=12),s.q.p.text(s.m.k().hours.pad(2)),s.q.s.text(s.m.k().minutes.pad(2));var a=s.m.k().hours*(Math.PI/6),n=Math.sin(a)*u,i=-Math.cos(a)*u;C(n,i)}},Q=function(t){s.toggleClass("minute",!$(t.target).is(".md-hour")),s.currentView=$(t.target).is(".md-hour")?"hours":"minutes";var e=($(t.target).is(".md-hour")?s.q.p.text():s.q.s.text())*(Math.PI/("hours"===s.currentView?6:30)),a=Math.sin(e)*u,n=-Math.cos(e)*u;C(a,n)},U=function(t){var e=$("year"==t?".md-select-wrap>span:matches("+s.m.k().year+")":".md-select-wrap>span[data-month="+s.m.k().month+"]");if(!e.length){for(var i=s.m.k().year-Number(s.q.select_year.children(":first-child").text()),a=1,r=Number(s.q.select_year.children(":first-child").text());i>=a;a++)s.q.select_year.prepend("<span>"+(r+a)+"</span>");e=$(".md-select-wrap>span:matches("+s.m.k().year+")")}var n=e.position().top;s.q["select_"+t].children("span").removeClass("md-currentdate"),"year"==t?$(".md-select-wrap>span:matches("+s.m.k().year+")").addClass("md-currentdate"):$(".md-select-wrap>span[data-month="+s.m.k().month+"]").addClass("md-currentdate"),s.q["select_"+t].addClass("inview animate"),s.q["select_"+t].stop().animate({scrollTop:n+s.q["select_"+t][0].scrollTop-(s.q["select_"+t][0].clientHeight-48)/2},parseInt(Math.abs(n.I(0,2e3,500,3e3))),"easeInOutExpo"),s.q["select_"+t].on(p,function(){s.q["select_"+t].removeClass("animate")}),s.q["select_"+t].on("mousewheel",function(e){s.q["select_"+t].stop()})},ht=function(t){var e=s.range?"next"==t?"start"==s.set&&s.m.k().month<s.end.m.k().month||"start"==s.set&&s.m.k().year!=s.end.m.k().year||"end"==s.set:"end"==s.set&&s.m.k().month>s.start.m.k().month||"end"==s.set&&s.m.k().year!=s.start.m.k().year||"start"==s.set:!0,a="start"==s.set?"end":"start";e&&(s.q.C.off("click"),s.q.J.addClass("animate "+t),"next"==t?s.m.setMonth(s.m.k().month+1):s.m.setMonth(s.m.k().month-1),(s.range&&"start"==s.set&&s.end.m<=s.m||s.range&&"end"==s.set&&s.start.m>=s.m)&&(s.m=new Date(s[a].m),pt()),_(),s.q.J.on(p,function(){s.q.current.html(s.q[t].html()),s.q.J.removeClass("animate "+t),v("next"),v("previous"),s.q.J.off(p),s.q.C.on("click",Z)}))},pt=function(){for(var e=["next","previous"],t=e.length-1;t>=0;t--)s.q[e[t]].find(".md-selecteddate").removeClass("md-selecteddate"),s.q[e[t]].find("span:matches("+s.m.k().day+")").addClass("md-selecteddate")},v=function(r){var d,a,l=s.m.k().month,t=new Date(s.m),o="";"previous"==r?t.setMonth(l-1):"next"==r&&t.setMonth(l+1),d=L[i(t)];for(var h=n(t),e=m.startday;e<d+m.startday;e++)o+="<span></span>";var p=x.k().month==t.k().month&&x.k().year==t.k().year,c="start"==s.set?"end":"start";if(s.range)var u=t.k().month==s[c].m.k().month&&t.k().year==s[c].m.k().year;for(var e=1;h>=e;e++)a=[],s.m.k().day==e&&a.push("md-selecteddate"),x.k().day==e&&p&&a.push("md-currentdate"),(s.range&&"start"==s.set&&e>s.end.m.k().day&&u||s.range&&"end"==s.set&&e<s.start.m.k().day&&u)&&a.push("disabled"),o+="<span"+(a.length>=1?' class="'+a.join(" ")+'"':"")+" >"+e+"</span>";s.q[r].find(".md-month-display").text(t.F(m.language,{month:"long"})),s.q[r].find(".md-year-display").text(t.k().year),s.q[r].find(".md-week").html(o)},s=$(rt).appendTo("body");if(s.q={},m.timepicker){var w=s.find(".md-clock");w.append(b),s.v=N,s.B=E,s.o=S,s.A=g,s.u=k,s.canvas=w,s.t={},s.t.minutes=s.canvas.find(".md-minutes>div"),s.t.hours=s.canvas.find(".md-hours>div"),s.q.p=s.find(".md-hour"),s.q.s=s.find(".md-minute"),s.q.K=s.find(".md-ampm-toggle"),s.currentView="hours",w.on(st,it)}s.q.G=s.find(".year"),s.q.D=s.find(".month"),s.q.H=s.find(".day"),s.q.buttons=s.find(".md-buttons"),s.q.weekday=s.find(".weekday"),s.q.J=s.find(".md-months"),s.q.current=s.find(".md-current-month"),s.q.next=s.find(".md-next-month"),s.q.C=s.find(".md-next").add(s.find(".md-previous")),s.q.select_month=s.find(".month-select"),s.q.select_year=s.find(".year-select"),s.q.previous=s.find(".md-previous-month"),s.q.C.on("click",Z),s.on("click",".month-select>span, .year-select>span",function(e){if($(this).data("month")===d?(s.m.setYear($(this).text()),s.q.select_year.off()):(s.m.setMonth($(this).data("month")),s.q.select_month.off()),s.range&&("start"==s.set&&s.end.m<=s.m||"end"==s.set&&s.start.m>=s.m)){var t="start"==s.set?"end":"start";s.m=new Date(s[t].m)}_(),v("current"),$(this).parents(".md-select-wrap").addClass("animate").removeClass("inview").off(p),v("previous"),v("next")}),s.q.D.on("click",function(t){U("month")}),s.q.G.on("click",function(t){U("year")}),s.on("click",".md-week span",function(t){$(".md-selecteddate").removeClass("md-selecteddate"),s.q.J.find("span:matches("+$(this).text()+")").addClass("md-selecteddate"),s.m.setDate($(this).text()),_()}),s.on("click",".md-toggle-state",function(t){s.toggleClass("clockpicker",!s.hasClass("clockpicker"))}),s.on("click",".md-minute, .md-hour",function(t){Q(t)}),s.on("click",".md-pm, .md-am",function(e){s.toggleClass("pm",!$(e.target).is(".md-am"));var t=parseInt(s.q.p.text());t=s.hasClass("pm")?t+12==24?12:t+12:0==t?0:t-12,s.q.p.text(t.pad(2)),s.m.setHours(t.pad(2))});var gt=this,A=[];return this.each(function(){this.j=!0,$(this).on("focus",function(t){t.preventDefault(),$(A).removeClass("focused"),$(t.target).addClass("focused"),gt.show(t.target)}),A.push(this),$(this).is("[data-md-start]")&&(s.start=this),$(this).is("[data-md-end]")&&(s.end=this)}).promise().done(function(){if(s.state="ready",A.length>2&&s.start)throw new Error("Only one start and one end Date is allowed");s.L=A})}}}(jQuery,window,document),Number.prototype.I=function(t,a,e,s){return e+(this-t)*(s-e)/(a-t)},Date.prototype.k=function(){return{year:this.getFullYear(),month:this.getMonth(),hours:this.getHours(),minutes:this.getMinutes(),day:this.getDate(),weekday:this.getDay()}},Date.prototype.F=function(s,a){return e()?this.toLocaleString(s,a):t[s.split("-")[0]][Object.keys(a)[0]][this.k()[Object.keys(a)]]},Number.prototype.pad=function(e){for(var t=String(this);t.length<(e||2);)t="0"+t;return t},String.prototype.pad=function(e){for(var t=String(this);t.length<(e||2);)t="0"+t;return t},$.expr[":"].matches=$.expr.createPseudo(function(t){return function(e){return $(e).text().match("^"+t+"$")}});
