function a(e){return new Date(e.l().year,e.l().month+1,0).l().day}function s(e){return new Date(e.l().year,e.l().month,1).l().weekday}function t(){try{(new Date).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}var e=0;locale={en:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],weekday:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g:{h:"delete",i:"cancel"}},de:{month:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],weekday:["So","Mo","Di","Mi","Do","Fr","Sa"],g:{h:"Löschen",i:"Abbrechen"}}},prefixes=["moz","ms","webkit","o"],function($,l,n,i){function o(){var t=n.createElement("div").style;if(t.flex!=i)return!0;for(var e=prefixes.length-1;e>=0;e--)if(t[prefixes[e]+"Flex"]!=i)return!0;return!1}$.fn.md_datepicker=function(K){"use strict";function N(e,t,a,n,s){return'<div class="lolliclock-tick" style="left:'+(e+Math.sin(t)*(p*s)-a).toFixed(2)+"px;top:"+(e-Math.cos(t)*(p*s)-a).toFixed(2)+'px">'+n+"</div>"}function E(){return r.start&&r.end?r.p!=i&&r["start"==r.set?"end":"start"].p!=i:!1}function G(){re(this.className.split(" ")[0].split("-")[1])}function pe(){r.toggleClass("pm",!r.hasClass("pm"));var e=parseInt(r.s.B.text());e=r.hasClass("pm")?e+12==24?12:e+12:0==e?0:e-12,r.s.B.text(e.pad(2)),r.p.setHours(e.pad(2))}moment();if(!o())return $(this).each(function(t,e){try{e.type="date"}catch(t){e.type="text"}});e++;var W=!1;if(this.each(function(){this.j&&(W=!0)}),!W){var me={language:null,theme:"light",k:!0,timepicker:!1,startday:1,autoclose:!1,mindate:null,maxdate:null,range:"past",_24h:!1,format:"YYYY-MM-DD",animated:!0,submit:"string",custom_class:""},ce=t(),O="ontouchstart"in l,he="mousedown"+(O?" touchstart":""),H="mousemove.lolliclock"+(O?" touchmove.lolliclock":""),Y="mouseup.lolliclock"+(O?" touchend.lolliclock":""),m="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",f=new Date,d=$.extend({},me,K),L=[0,1,2,3,4,5,6],A=L.splice(-d.startday),L=A.concat(L);if(d.language=d.language?d.language:navigator.language||navigator.userLanguage||"en",d.format=d.timepicker&&!K.format?"YYYY-MM-DD HH:mm":d.format,f.setSeconds(0),d.format){var Q=d.format.match(/\W/),le=d.timepicker?d.format.split(" ")[0].split(Q).reverse():d.format.split(Q).reverse();d.timepicker&&$.each(d.format.split(" ")[1].split(":"),function(t,e){le.push(e)})}if(ce){for(var w,c=0,T=[];7>c;c++)w=new Date(2015,1,c),T[w.l().weekday]=w.toLocaleString(d.language,{weekday:"short"}).replace(".","");for(var w,c=0,J=[];12>c;c++)w=new Date(2015,c,1),J[c]=w.toLocaleString(d.language,{month:"long"})}else var T=locale[d.language.split("-")[0]].weekday.slice(0),J=locale[d.language.split("-")[0]].month.slice(0);A=T.splice(0,d.startday);var ie=T.concat(A),_="",M="",B="";$.each(ie,function(t,e){M+="<span>"+e+"</span>"}),$.each(J,function(e,t){B+='<span data-month="'+e+'">'+J[e]+"</span>"});var g=100,z=d.mindate&&d.mindate.search(/^[-+]/)?moment(d.mindate):moment().add(d.mindate,"y"),I=d.maxdate&&d.maxdate.search(/^[-+]/)?moment(d.maxdate):moment().add(d.maxdate,"y");d.mindate&&d.maxdate?(g=moment.duration(I-z).years(),d.range="calculated"):d.mindate&&"past"==d.range?g=moment.duration(f-z).years()+1:d.maxdate&&"future"==d.range&&(g=moment.duration(I-f).years());for(var w,c=0,ee="",S=d.range,F=f.l().year;g>=c;c++)ee+="<span>"+("future"==S?F+g-c:"past"==S?F-c:"calculated"==S?I.year()-c:F-(c-(g-g%2)/2))+"</span>";var ne=$(this);ne.each(function(){var e=n.createElement("input");e.type="hidden",e.className="",e.m=this,e.id=this.id+"-timestamp",this.readOnly=!0,"timestamp"==d.submit?this.name="":e.name="",this.o=e,this.parentNode.appendChild(e),this.onchange=function(e){""!=this.value?(this.o.value=moment(this.value,d.format).unix(),this.p=new Date(moment(this.value,d.format).unix())):(this.o.value=0,this.o.p=i)},this.o.onchange=function(s){var t=Number(1e3*this.value),a=e.m.onchange;e.m.onchange=null,""==this.value?(e.m.value="",e.m.p=i):(e.m.value=moment(t).format(d.format),e.m.p=new Date(t)),$(e.m).change(),e.m.onchange=a}});for(var c=1;31>=c;c++)_+="<span>"+c+"</span>";if(d.timepicker){var j=$('<div class="md-clock" style="visibility: hidden">').appendTo("body"),q=parseInt(j.height());j.remove();for(var k,h=q/2,p=h-32,v=20,se=d._24h?25:13,c=1,R="";se>c;c++)k=c/6*Math.PI,R+=d._24h&&13>c?N(h,k,v,c,.6):N(h,k,v,c,1);for(var k,c=0,Z="";60>c;c+=5)k=c/30*Math.PI,Z+=N(h,k,v,c.pad(2),1);var ae='<div class="md-datepicker-timeview"><div class="md-datepick-header"><div class="md-datepicker-headline"><span class="md-hour"></span>:<span class="md-minute"></span><div class="md-ampm-toggle"><span class="md-am">AM</span><span class="md-pm">PM</span></div></div>'+(d.k?'<i class="md-toggle-state no-hover">&#xE878;</i>':"")+'</div><div class="md-clock"><div class="md-hours">'+R+'</div><div class="md-minutes">'+Z+"</div></div></div>",b='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="lolliclock-svg" width="'+q+'" height="'+q+'" style="transform: rotateZ(0deg);"><g transform="translate('+h+","+h+')"><circle class="lolliclock-canvas-bg" r="'+v+'" cx="0" cy="-'+p+'"></circle><circle class="lolliclock-canvas-fg" r="3.5" cx="0" cy="-'+p+'" ></circle><line x1="0" y1="0" x2="0" y2="-'+(p-v)+'"></line><circle class="lolliclock-bearing" cx="0" cy="0" r="3.5"></circle></g></svg>',te=function(e){var o=y.offset(),c=/^touch/.test(e.type),s=o.left+h,i=o.top+h,t=(c?e.originalEvent.touches[0]:e).pageX-s,a=(c?e.originalEvent.touches[0]:e).pageY-i,m=Math.sqrt(t*t+a*a),l=!1;cssua.ua.ie||r.s.q.classList.remove("animate"),p-v>m||m>p+v||(e.preventDefault(),$(n.body).addClass("lolliclock-moving"),y.append(self.canvas),x(t,a),r.s.q.t=r.s.q.u,$(n).off(H).on(H,function(e){e.preventDefault(),cssua.ua.ie||r.s.q.classList.remove("animate");var n=/^touch/.test(e.type),o=(n?e.originalEvent.touches[0]:e).pageX-s,d=(n?e.originalEvent.touches[0]:e).pageY-i;(l||o!==t||d!==a)&&(l=!0,x(o,d))}),$(n).off(Y).on(Y,function(e){e.preventDefault();var o=/^touch/.test(e.type),c=(o?e.originalEvent.changedTouches[0]:e).pageX-s,m=(o?e.originalEvent.changedTouches[0]:e).pageY-i;c===t&&m===a&&x(c,m),"hours"===r.currentView?setTimeout(function(){U(!0)},l?0:250):d.autoclose,$(n.body).removeClass("lolliclock-moving"),$(n).off(H),$(n).off(Y)}))}}var oe='<div class="md-datepicker md-'+d.theme.split(" ").join(" md-")+("all"==d.animated||"inout"==d.animated||d.animated?" md-datepicker-animated":"")+(""!=d.custom_class?" "+d.custom_class:"")+'" id="md-datepicker-'+e.pad(3)+'"><div class="md-datepicker-views"><div class="md-datepicker-dateview" '+(d.k?"":'style="display:none;"')+'><div class="md-datepick-header"><div><span class="year"></span></div><div class="md-datepicker-headline"><span class="weekday"></span><span class="day"></span> <span class="month"></span></div>'+(d.timepicker?'<i class="md-toggle-state no-hover">&#xE192;</i>':"")+'</div><div class="md-datepick-month"><i class="md-previous md-touchtarget no-hover">&#xE408;</i><i class="md-next md-touchtarget no-hover">&#xE409;</i></div><div class="md-months"><div class="md-previous-month md-month"><div class="md-date-wrap"><span class="md-month-display"></span> <span class="md-year-display"></span></div><div class="md-weekday">'+M+'</div><div class="md-week">'+_+'</div></div><div class="md-current-month md-month"><div class="md-date-wrap"><span class="md-month-display"></span> <span class="md-year-display"></span></div><div class="md-weekday">'+M+'</div><div class="md-week">'+_+'</div></div><div class="md-next-month md-month"><div class="md-date-wrap"><span class="md-month-display"></span> <span class="md-year-display"></span></div><div class="md-weekday">'+M+'</div><div class="md-week">'+_+'</div></div></div><div class="month-select md-select-wrap">'+B+'</div><div class="year-select md-select-wrap">'+ee+"</div></div>"+(d.timepicker?ae:"")+'</div><div class="md-buttons"><div class="md-button-flat button-delete">'+locale[d.language.split("-")[0]].g.h+'</div><div class="md-button-flat button-cancel">'+locale[d.language.split("-")[0]].g.i+'</div><div class="md-button-flat button-ok">OK</div></div></div><div class="md-datepicker__overlay"></div>',x=function(p,o){var a=Math.atan2(-p,o)+Math.PI,t="hours"===r.currentView,l=Math.PI/(t?6:30),m=t?"minutes":"hours",s=r.p.l()[m]*(Math.PI/(t?30:6))*(180/Math.PI)%360,e=Math.round(a/l);parseFloat((a*(180/Math.PI)%360).toFixed(1));if(a=e*l,r.s.q.u=r.s.q.v-s>180?360+s:s,t)e=t&&0===e?12:e,r.A.style.visibility="hidden",r.s.B.text(r.hasClass("pm")?e+12==24?12:(e+12).pad(2):12==e?"00":e.pad(2)),r.p.setHours(r.s.B.text());else{var d=e%5===0;d?r.A.style.visibility="hidden":r.A.style.visibility="visible",60===e&&(e=0),r.s.C.text(e.pad(2)),r.p.setMinutes(r.s.C.text())}var c="hours"==r.currentView?r.D.hours:r.D.minutes;c.each(function(a,t){$(t).toggleClass("active",$(t).text()==e)});var n=a*(180/Math.PI)%360,i=r.s.q.u-n>180?360+n:n;$(r.s.q).css("transform","rotateZ("+i+"deg)"),r.s.q.v=i},X=function(t){var e=$(t).offset(),a=r[0].clientWidth,s=r[0].clientHeight,n=$(t).offset();return e.top=e.top+s+8>=$(l).height()?$(l).height()-s-8:e.top,e.left=e.left+a+8>=$(l).width()?$(l).width()-a-8:e.left,e.F=n.left-e.left+"px "+(n.top-e.top)+"px",e};this.show=function(e){r.set=r.start==e?"start":"end";var s=""!=e.value?d.format?moment(e.value,d.format):moment(e.value):moment(E()?"start"==r.set?r.end.p:r.start.p:""),t=X(e);r.p=new Date(s),r.p=isNaN(r.p.getTime())?new Date:r.p,r.range=E(),r.removeClass("invisible"),r.s.G.removeClass("disabled"),u("current"),u("previous"),u("next"),D(),d.animated?(r.on(m,function(){r.addClass("animate"),r.off(m)}),r.hasClass("clockpicker")?(r.removeClass("clockpicker"),r.on(m,".md-datepicker-views",function(e){e.preventDefault(),$(r).css({top:t.top,left:t.left,"transform-origin":t.F,H:t.F}).off(m)})):$(r).css({top:t.top,left:t.left,"transform-origin":t.F,H:t.F}).addClass("md-datepicker-visible")):$(r).css({top:t.top,left:t.left,"transform-origin":t.F,H:t.F}).addClass("md-datepicker-visible"),r.s.buttons.off(),r.s.buttons.on("click",".button-ok",function(t){t.preventDefault(),$(e).is("[type=date]")?$(e).val(r.p.l().year+"-"+(r.p.l().month+1).pad(2)+"-"+r.p.l().day.pad(2)).change():d.format?$(e).val(moment(r.p).format(d.format)).change():d.timepicker?$(e).val(r.p.toLocaleString()).change():$(e).val(r.p.toLocaleDateString()).change(),r[r.set].p=r.p,e.p=r.p,P(e)}),r.s.buttons.on("click",".button-delete",function(t){t.preventDefault(),e.p=i,$(e).val("").change(),P(e)}),r.s.buttons.children(".button-delete").toggleClass("disabled",""==e.value),r.s.buttons.on("click",".button-cancel",function(t){t.preventDefault(),P(e)});var a;$(l).on("resize.id"+r.I,function(s){clearTimeout(a),t=X(e),r.css({top:t.top,left:t.left}).removeClass("animate"),a=setTimeout(function(){r.addClass("animate")},100)})};var P=function(e){$(e).removeClass("focused"),r.removeClass("clockpicker md-datepicker-visible animate"),r.s.buttons.off(),$(l).off("resize.id"+r.I),r.on(m,function(e){e.preventDefault(),r.addClass("invisible"),r.off(m)})},D=function(){if(E()){var e="start"==r.set?"end":"start",t=r.s.select_year.find("span:matches("+r[e].p.l().year+")");(r.start.p&&r.start.p.l().year<=r.p.l().year&&"start"==e||r.end.p&&r.end.p.l().year>=r.p.l().year&&"end"==e)&&($(r.s.G["start"==r.set|0]).toggleClass("disabled",r.p.l().year==r[e].p.l().year&&r[e].p.l().month==r.p.l().month),r.p.l().year==r[e].p.l().year&&t.push(r.s.select_month.find("span[data-month="+r[e].p.l().month+"]")[0]),r.find(".md-select-wrap>span").removeClass("disabled"),"end"==r.set?($(t[1]).prevAll().addClass("disabled"),$(t[0]).nextAll().addClass("disabled")):($(t[0]).prevAll().addClass("disabled"),$(t[1]).nextAll().addClass("disabled")))}else r.find(".md-select-wrap>span").removeClass("disabled");if(r.s.J.text(r.p.K(d.language,{month:"long"})),r.s.years.text(r.p.l().year),r.s.L.text(r.p.l().day),r.s.weekday.text(r.p.K(d.language,{weekday:"short"}).replace(".","")),d.timepicker){r.removeClass("minute"),r.currentView="hours",r.toggleClass("pm",r.p.l().hours>=12),r.s.B.text(r.p.l().hours.pad(2)),r.s.C.text(r.p.l().minutes.pad(2));var a=r.p.l().hours*(Math.PI/6),s=r.p.l().minutes*(Math.PI/30),n=Math.sin(a)*p,i=-Math.cos(a)*p;r.s.q.u=s*(180/Math.PI),r.s.q.v=a*(180/Math.PI),x(n,i)}},U=function(a){var e=!$(a.target).is(".md-hour");r.s.q.u=r.s.q.v,r.currentView=e?"minutes":"hours";var t=(e?r.s.C.text():r.s.B.text())*(Math.PI/("hours"===r.currentView?6:30)),s=Math.sin(t)*p,n=-Math.cos(t)*p;cssua.ua.ie||r.s.q.classList.add("animate"),$(r.s.q).on(m,function(e){$(r.s.q).off(),cssua.ua.ie||r.s.q.classList.remove("animate")}),r.toggleClass("minute",e),x(s,n)},V=function(e){var t="year"==e?r.s.select_year.find("span:matches("+r.p.l().year+")"):r.s.select_month.find("span[data-month="+r.p.l().month+"]");if(!t.length){for(var n=r.p.l().year-Number(r.s.select_year.children(":first-child").text()),a=1,i=Number(r.s.select_year.children(":first-child").text());n>=a;a++)r.s.select_year.prepend("<span>"+(i+a)+"</span>");t=r.s.select_year.find("span:matches("+r.p.l().year+")")}var s=t.position().top;r.s["select_"+e].children("span").removeClass("md-currentdate"),"year"==e?r.s.select_year.find("span:matches("+r.p.l().year+")").addClass("md-currentdate"):r.s.select_month.find("span[data-month="+r.p.l().month+"]").addClass("md-currentdate"),r.s["select_"+e].hasClass("inview")||r.s["select_"+e].addClass("inview animate"),r.s["select_"+e].stop().animate({scrollTop:s+r.s["select_"+e][0].scrollTop-(r.s["select_"+e][0].clientHeight-48)/2},parseInt(Math.abs(s.M(0,2e3,500,3e3))),"easeInOutExpo"),r.s["select_"+e].on(m,function(){r.s["select_"+e].removeClass("animate")}),r.s["select_"+e].on("mousewheel",function(t){r.s["select_"+e].stop()})},re=function(e){var t=r.range?"next"==e?"start"==r.set&&r.p.l().month<r.end.p.l().month||"start"==r.set&&r.p.l().year!=r.end.p.l().year||"end"==r.set:"end"==r.set&&r.p.l().month>r.start.p.l().month||"end"==r.set&&r.p.l().year!=r.start.p.l().year||"start"==r.set:!0,a="start"==r.set?"end":"start";t&&(r.s.G.off("click"),r.s.N.addClass("animate "+e),"next"==e?r.p.setMonth(r.p.l().month+1):r.p.setMonth(r.p.l().month-1),(r.range&&"start"==r.set&&r.end.p<=r.p||r.range&&"end"==r.set&&r.start.p>=r.p)&&(r.p=new Date(r[a].p),de()),D(),r.s.N.on(m,function(){r.s.current.html(r.s[e].html()),r.s.N.removeClass("animate "+e),u("next"),u("previous"),r.s.N.off(m),r.s.G.on("click",G)}))},de=function(){for(var t=["next","previous"],e=t.length-1;e>=0;e--)r.s[t[e]].find(".md-selecteddate").removeClass("md-selecteddate"),r.s[t[e]].find("span:matches("+r.p.l().day+")").addClass("md-selecteddate")},u=function(i){var o,n,c=r.p.l().month,e=new Date(r.p),l="";"previous"==i?e.setMonth(c-1):"next"==i&&e.setMonth(c+1),o=L[s(e)];for(var u=a(e),t=d.startday;t<o+d.startday;t++)l+="<span></span>";var h=f.l().month==e.l().month&&f.l().year==e.l().year,m="start"==r.set?"end":"start";if(r.range)var p=e.l().month==r[m].p.l().month&&e.l().year==r[m].p.l().year;for(var t=1;u>=t;t++)n=[],r.p.l().day==t&&n.push("md-selecteddate"),f.l().day==t&&h&&n.push("md-currentdate"),(r.range&&"start"==r.set&&t>r.end.p.l().day&&p||r.range&&"end"==r.set&&t<r.start.p.l().day&&p)&&n.push("disabled"),l+="<span"+(n.length>=1?' class="'+n.join(" ")+'"':"")+" >"+t+"</span>";r.s[i].find(".md-month-display").text(e.K(d.language,{month:"long"})),r.s[i].find(".md-year-display").text(e.l().year),r.s[i].find(".md-week").html(l)},r=$($(oe).appendTo("body")[0]);if(r.s={},r.I=e,d.timepicker){var y=r.find(".md-clock");b=$(b).appendTo(y)[0],$.extend(r,{A:cssua.ua.ie?$(b).find('[class="lolliclock-canvas-fg"]')[0]:$(b).find(".lolliclock-canvas-fg")[0],canvas:y,D:{}}),r.s.q=b,r.s.q.v=0,r.D.minutes=r.canvas.find(".md-minutes>div"),r.D.hours=r.canvas.find(".md-hours>div"),r.s.B=r.find(".md-hour"),r.s.C=r.find(".md-minute"),r.s.O=r.find(".md-ampm-toggle"),r.currentView="hours",y.on(he,te)}r.s.years=r.find(".year"),r.s.J=r.find(".month"),r.s.L=r.find(".day"),r.s.buttons=r.find(".md-buttons"),r.s.weekday=r.find(".weekday"),r.s.N=r.find(".md-months"),r.s.current=r.find(".md-current-month"),r.s.next=r.find(".md-next-month"),r.s.G=r.find(".md-next").add(r.find(".md-previous")),r.s.select_month=r.find(".month-select"),r.s.select_year=r.find(".year-select"),r.s.previous=r.find(".md-previous-month"),r.s.G.on("click",G),r.on("click",".month-select>span, .year-select>span",function(t){if($(this).data("month")===i?(r.p.setYear($(this).text()),r.s.select_year.off()):(r.p.setMonth($(this).data("month")),r.s.select_month.off()),r.range&&("start"==r.set&&r.end.p<=r.p||"end"==r.set&&r.start.p>=r.p)){var e="start"==r.set?"end":"start";r.p=new Date(r[e].p)}D(),u("current"),$(this).parents(".md-select-wrap").addClass("animate").removeClass("inview").off(m),u("previous"),u("next")}),r.s.J.on("click",function(e){V("month")}),r.s.years.on("click",function(e){V("year")}),r.on("click",".md-week span",function(e){r.s.N.find(".md-selecteddate").removeClass("md-selecteddate"),r.s.N.find("span:matches("+$(this).text()+")").addClass("md-selecteddate"),r.p.setDate($(this).text()),D()}),r.on("click",".md-toggle-state",function(e){r.toggleClass("clockpicker",!r.hasClass("clockpicker"))}),r.on("click",".md-minute, .md-hour",function(e){U(e)}),r.on("click",".md-pm, .md-am",function(){pe()});var ue=this,C=[];return this.each(function(){this.j=!0,$(this).on("focus",function(e){e.preventDefault(),$(C).removeClass("focused"),$(e.target).addClass("focused"),ue.show(e.target)}),C.push(this),$(this).is("[data-md-start]")&&(r.start=this),$(this).is("[data-md-end]")&&(r.end=this)}).promise().done(function(){if(r.state="ready",C.length>2&&r.start)throw new Error("Only one start and one end Date is allowed");r.P=C})}}}(jQuery,window,document),Number.prototype.M=function(e,a,t,s){return t+(this-e)*(s-t)/(a-e)},Date.prototype.l=function(){return{year:this.getFullYear(),month:this.getMonth(),hours:this.getHours(),minutes:this.getMinutes(),day:this.getDate(),weekday:this.getDay()}},Date.prototype.K=function(a,e){return t()?this.toLocaleString(a,e):locale[a.split("-")[0]][Object.keys(e)[0]][this.l()[Object.keys(e)]]},Element.prototype.R=function(t){"use strict";for(var e in t)t.hasOwnProperty(e)&&(this instanceof SVGElement||(this[e]=t[e]),this[e]!=t[e]&&this.setAttribute(e,t[e]));return this},Number.prototype.pad=function(t){for(var e=String(this);e.length<(t||2);)e="0"+e;return e},String.prototype.pad=function(t){for(var e=String(this);e.length<(t||2);)e="0"+e;return e},$.expr[":"].matches=$.expr.createPseudo(function(e){return function(t){return $(t).text().match("^"+e+"$")}});
